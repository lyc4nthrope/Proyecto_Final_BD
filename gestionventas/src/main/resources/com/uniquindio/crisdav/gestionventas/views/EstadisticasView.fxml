<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<VBox xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="com.uniquindio.crisdav.gestionventas.controllers.views.EstadisticasViewController"
      spacing="15" style="-fx-padding: 20;">

    <!-- TÃ­tulo -->
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Label text="ðŸ“ˆ EstadÃ­sticas de Ventas" style="-fx-font-size: 24; -fx-font-weight: bold;"/>
        <Region HBox.hgrow="ALWAYS"/>
        <Button text="ðŸ“Š Exportar" onAction="#exportarReporte" 
                style="-fx-background-color: #28a745; -fx-text-fill: white; -fx-font-size: 13; -fx-padding: 8 15;"/>
    </HBox>
    
    <Separator/>

    <!-- SelecciÃ³n de PerÃ­odo -->
    <HBox spacing="15" alignment="CENTER_LEFT" style="-fx-background-color: #f8f9fa; -fx-padding: 15; -fx-background-radius: 5;">
        <VBox spacing="5">
            <Label text="Fecha Inicio:" style="-fx-font-weight: bold; -fx-font-size: 12;"/>
            <DatePicker fx:id="dpFechaInicio" prefWidth="150"/>
        </VBox>
        
        <VBox spacing="5">
            <Label text="Fecha Fin:" style="-fx-font-weight: bold; -fx-font-size: 12;"/>
            <DatePicker fx:id="dpFechaFin" prefWidth="150"/>
        </VBox>
        
        <VBox spacing="5" alignment="BOTTOM_LEFT">
            <Label text=" "/>
            <Button text="ðŸ“Š Generar EstadÃ­sticas" onAction="#generarEstadisticas" 
                    style="-fx-background-color: #007bff; -fx-text-fill: white; -fx-font-size: 13; -fx-padding: 8 20; -fx-font-weight: bold;"/>
        </VBox>
    </HBox>

    <!-- EstadÃ­sticas Generales -->
    <GridPane hgap="15" vgap="15">
        <padding>
            <Insets top="10" bottom="10"/>
        </padding>
        
        <!-- Total Ventas -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #007bff; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="0" GridPane.rowIndex="0">
            <Label text="Total Ventas" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblTotalVentas" text="0" style="-fx-text-fill: white; -fx-font-size: 36; -fx-font-weight: bold;"/>
        </VBox>
        
        <!-- Ventas Contado -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #28a745; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="1" GridPane.rowIndex="0">
            <Label text="Ventas Contado" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblVentasContado" text="0" style="-fx-text-fill: white; -fx-font-size: 36; -fx-font-weight: bold;"/>
        </VBox>
        
        <!-- Ventas CrÃ©dito -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #ffc107; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="2" GridPane.rowIndex="0">
            <Label text="Ventas CrÃ©dito" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblVentasCredito" text="0" style="-fx-text-fill: white; -fx-font-size: 36; -fx-font-weight: bold;"/>
        </VBox>

        <!-- Monto Total -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #17a2b8; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="0" GridPane.rowIndex="1">
            <Label text="Monto Total" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblMontoTotal" text=" $0.00" style="-fx-text-fill: white; -fx-font-size: 28; -fx-font-weight: bold;"/>
        </VBox>
        
        <!-- Monto Contado -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #20c997; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="1" GridPane.rowIndex="1">
            <Label text="Monto Contado" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblMontoContado" text=" $0.00" style="-fx-text-fill: white; -fx-font-size: 28; -fx-font-weight: bold;"/>
        </VBox>
        
        <!-- Monto CrÃ©dito -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #fd7e14; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="2" GridPane.rowIndex="1">
            <Label text="Monto CrÃ©dito" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblMontoCredito" text=" $0.00" style="-fx-text-fill: white; -fx-font-size: 28; -fx-font-weight: bold;"/>
        </VBox>
        
        <!-- Promedio Venta -->
        <VBox spacing="5" alignment="CENTER" style="-fx-background-color: #6f42c1; -fx-padding: 20; -fx-background-radius: 10;" GridPane.columnIndex="3" GridPane.rowIndex="0" GridPane.rowSpan="2">
            <Label text="Promedio por Venta" style="-fx-text-fill: white; -fx-font-weight: bold; -fx-font-size: 13;"/>
            <Label fx:id="lblPromedioVenta" text=" $0.00" style="-fx-text-fill: white; -fx-font-size: 32; -fx-font-weight: bold;"/>
        </VBox>
        
        <columnConstraints>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
            <ColumnConstraints percentWidth="25"/>
        </columnConstraints>
    </GridPane>

    <!-- GrÃ¡ficos -->
    <HBox spacing="15" VBox.vgrow="ALWAYS">
        <!-- GrÃ¡fico de Pastel -->
        <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-border-color: #dee2e6; -fx-border-width: 1; -fx-padding: 15; -fx-background-color: white; -fx-border-radius: 5;">
            <Label text="ðŸ“Š DistribuciÃ³n por Tipo de Venta" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
            <PieChart fx:id="graficoPorTipo" legendVisible="true" VBox.vgrow="ALWAYS"/>
        </VBox>
        
        <!-- GrÃ¡fico de Barras -->
        <VBox spacing="10" HBox.hgrow="ALWAYS" style="-fx-border-color: #dee2e6; -fx-border-width: 1; -fx-padding: 15; -fx-background-color: white; -fx-border-radius: 5;">
            <Label text="ðŸ’° Comparativo de Montos" style="-fx-font-weight: bold; -fx-font-size: 14;"/>
            <BarChart fx:id="graficoMontos" legendVisible="true" VBox.vgrow="ALWAYS">
                <xAxis>
                    <CategoryAxis fx:id="xAxis" label="Tipo de Venta"/>
                </xAxis>
                <yAxis>
                    <NumberAxis fx:id="yAxis" label="Monto ($)"/>
                </yAxis>
            </BarChart>
        </VBox>
    </HBox>

</VBox>