<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.control.*?>
<?import javafx.collections.FXCollections?>
<?import javafx.geometry.Insets?>

<BorderPane xmlns:fx="http://javafx.com/fxml" fx:controller="com.uniquindio.crisdav.gestionventas.controllers.VentaController">
    <top>
        <HBox spacing="8">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <Label text="Registrar Venta" style="-fx-font-size:16px; -fx-font-weight:bold;"/>
            <Region HBox.hgrow="ALWAYS"/>
            <Button text="Nueva" onAction="#nuevaVenta"/>
            <Button text="Refrescar" onAction="#refrescarProductos"/>
        </HBox>
    </top>

    <center>
        <HBox spacing="10">
            <padding>
                <Insets top="10" right="10" bottom="10" left="10"/>
            </padding>

            <!-- Lista de productos -->
            <VBox spacing="8" prefWidth="420">
                <TextField fx:id="txtBuscarProdVenta" promptText="Buscar producto..." onKeyReleased="#buscarProducto"/>
                <TableView fx:id="tablaProductosVenta" prefHeight="300" onMouseClicked="#seleccionarProductoParaAgregar">
                    <columns>
                        <TableColumn text="ID" prefWidth="50"/>
                        <TableColumn text="Nombre" prefWidth="200"/>
                        <TableColumn text="Precio" prefWidth="100"/>
                        <TableColumn text="Stock" prefWidth="70"/>
                    </columns>
                </TableView>
                <HBox spacing="6">
                    <Label text="Cantidad:"/>
                    <TextField fx:id="txtCantidad" prefWidth="70"/>
                    <Button text="Agregar al carrito" onAction="#agregarAlCarrito"/>
                </HBox>
            </VBox>

            <!-- Carrito -->
            <VBox spacing="8" prefWidth="420">
                <Label text="Carrito" style="-fx-font-weight:bold;"/>
                <TableView fx:id="tablaCarrito" prefHeight="260">
                    <columns>
                        <TableColumn text="Producto" prefWidth="200"/>
                        <TableColumn text="Cant." prefWidth="80"/>
                        <TableColumn text="Precio U." prefWidth="100"/>
                        <TableColumn text="Subtotal" prefWidth="120"/>
                    </columns>
                </TableView>

                <HBox spacing="8">
                    <Label text="Tipo Venta:"/>
                    <ComboBox fx:id="cmbTipoVenta">
                    </ComboBox>
                    <Label text="Plazo (meses):"/>
                    <ComboBox fx:id="cmbPlazo">
                    </ComboBox>
                </HBox>

                <HBox spacing="10">
                    <Label fx:id="lblTotal" text="Total: 0.00" style="-fx-font-weight:bold;"/>
                    <Region HBox.hgrow="ALWAYS"/>
                    <Button text="Generar Venta" onAction="#generarVenta"/>
                    <Button text="Imprimir Factura" onAction="#imprimirFactura"/>
                </HBox>
            </VBox>
        </HBox>
    </center>
</BorderPane>
